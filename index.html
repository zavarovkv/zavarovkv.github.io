<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>Документация по партнерскому API gds</title>
	</head>
<body>
<h1>Документация по партнерскому API g<img src="img-7.png"/><img src="img-8.png"/>ds</h1>

<h1></h1>

<p><code>Партнерский API</code> предназначен для автоматизированного обмена данными между продавцами и goods. API служит для управления заказами, оформленными покупателями на маркетплейсе goods.</p>

<p>Документ предназначен для разработчиков приложений. В документе приведены примеры запросов и ответов с демонстрационными данными.</p>

<ol>
	<li><a href="#how_to_connect">Как подключиться по API</a></li>
	<li><a href="#api">Описание API</a></li>
	<li><a href="#how_to_use_api">Процесс обработки заказов продавцом по API</a>

		<ul>
			<li><a href="#how_to_use_api_step1">Шаг 1 — Размещение товарных предложений на goods</a></li>
			<li><a href="#how_to_use_api_step2">Шаг 2 — Подтверждение нового заказа</a></li>
			<li><a href="#how_to_use_api_step3">Шаг 3 — Комплектация заказа для отгрузки</a></li>
			<li><a href="#how_to_use_api_step4">Шаг 4 — Отгрузка заказа</a></li>
		</ul></li>
	<li><a href="#price-list">Загрузка прайс-листа в формате YML</a></li>
	<li><a href="#label_info">Требования к маркировочному листу</a></li>
	<li><a href="#registry_info">Требования к реестру отгрузки</a></li>
	<li><a href="#faq">Вопросы и ответы</a></li>
</ol>

<hr />

<a name="how_to_connect"></a>
<h2>Как подключиться по API</h2>

<p>Для использования API продавец должен выполнить шаги:</p>

<p><code>Шаг 1</code> — <a href="https://goods.ru/inviteshop/">Зарегистрируйтесь в goods</a> и получите доступ к <a href="partner.goods.ru">личному кабинету продавца</a></p>

<p><code>Шаг 2</code> — Настройте интеграцию по API в <a href="https://partner.goods.ru/merchant-app/account/api-integration">личном кабинете</a></p>

<p><code>Шаг 3</code> — Получите авторизационный токен в <a href="https://partner.goods.ru/merchant-app/account/api-integration">личном кабинете</a></p>

<p><code>Шаг 4</code> — Получите уникальный идентификатор магазина (у менеджеров goods)</p>

<p><code>Шаг 5</code> — Используйте токен и идентификатор при вызове методов API</p>

<hr />

<a name="api"></a>
<h2>Описание API</h2>

<p>Подробная спецификация доступна по <a href="/api.html">ссылке</a></p>

<a name="methods"></a>
<h3>Справочник методов</h3>

<h4>Запросы к goods</h4>

<ul>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/confirm</mark></a> — подтверждение заказа</li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/packing</mark></a> — комплектация заказа</li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/shipping</mark></a> — отгрузка заказа</li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/reject</mark></a> — отмена заказа <strong>продавцом</strong></li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/search</mark></a> — получение списка заказов, удовлетворяющих заданному фильтру</li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/get</mark></a> — получение детальной информации по заказу</li>
</ul>

<h4>Запросы к продавцу</h4>

<ul>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/new</mark></a> — создание заказа</li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/cancel</mark></a> — отмена заказа <strong>покупателем</strong></li>
	<li><a href="#api_order_new"><mark><strong>POST</strong> /order/labelUpdate</mark></a> — изменение маркировочного листа</li>
</ul>

<hr />

<a name="how_to_use_api"></a>
<h2>Процесс обработки заказов продавцом по API</h2>

<p>Продавец публикует товарные предложения на goods через прайс-лист в формате YML. Покупатель заинтересовавшись выгодным предложением оформляет заказ. После получения заказа продавец подтверждает возможность его отгрузки в указанные сроки, выполняет комплектацию и отгрузку.</p>

<p>Рассмотрим этот процесс более детально.</p>

<a name="how_to_use_api_step1"></a>
<h3>Шаг 1 — Размещение товарных предложений на goods</h3>

<p>Для размещения товарных предложений для продажи на маркетплейсе goods необходимо сформировать прайс-лист в формате YML (<a href="#yml">подробнее про требования к прайс-листу и YML</a>).</p>

<p>Товарные предложения описываются характеристиками:</p>

<ul>
	<li>наименование / описание товара;

		<ul>
			<li>цена;</li>
			<li>наличие / доступные к продаже остатки (кол-во);</li>
			<li>склад на котором находится товар.</li>
			<li>возможные сроки отгрузки</li>
		</ul>

		<h4>Пример описания товарных предложений в прайс-листе</h4>

		<script src="https://gist.github.com/zavarovkv/7eb65b1b4014e7de8e0f4fa9d785811d.js"></script></li>
</ul>

<hr />

<a name="how_to_use_api_step2"></a>
<h3>Шаг 2 — Подтверждение нового заказа</h3>

<ol>
	<li><a href="#step2_example">Процесс подтверждения нового заказа</a></li>
	<li><a href="#step2_api">Последовательность обращений по API</a></li>
	<li><a href="#1">Примеры вызовов API</a></li>
</ol>

<h4></h4>

<a name="step2_example"></a>
<h4>Процесс подтверждения нового заказа</h4>

<p>Рассмотрим пример, когда покупатель оформляет заказ состоящий из трех позиций: <em>телефон</em>, <em>планшет</em>, <em>корм для питомца</em>. <em>Телефон</em> и <em>планшет</em> покупается у <em>’Продавец 1’</em>, а <em>корм для питомца</em> у <em>’Продавец 2’</em>. Goods сообщает каждому продавцу про его часть заказа.</p>

<figure><img src="img-1.jpg"/></figure>

<p>Продавец, получив новый заказ от goods проверяет доступное кол-во остатков по каждой позиции в заказе и дает свое согласие об отгрузке заказа в указанный срок.</p>

<figure><img src="img-2.jpg"/></figure>

<a name="step2_api"></a>
<h4>Последовательность обращений по API</h4>

<ol>
	<li>После оформления покупателем нового заказа, goods передает информацию по заказу продавцу вызовом метода <a href="/api.html"><mark>POST order/new</mark></a>, который должен быть реализован на стороне продавца. 

		<ul>
			<li>В объекте <code>items</code> передается информация по каждому товару в заказе. Элемент <code>itemIndex</code> идентифицирует товар и дальнейшее общение с goods по товарам выполняется через <code>itemIndex</code>.</li>
			<li>В объекте <code>label</code> передается информация необходимая для добавления в шаблон маркировочного листа. 

				<ul>
					<li><a href="#1">Скачать шаблон маркировочного листа</a></li>
					<li><a href="#label_info">Ознакомиться с требованиями к маркировочному листу</a></li>
				</ul></li>
			<li>В элементе <code>shippingDate</code> передается дата отгрузки заказа, в которую продавец обязуется отгрузить заказ. Для того, чтобы доставить заказ покупателю в запланированную дату доставки.</li>
		</ul></li>
	<li>Продавец обязуется в течение <strong>3 часов</strong> с момента получения заказа сообщить свое решение goods об отгрузки. Решение ожидается по каждому товару в заказе. Сообщается вызовом методов <a href="#link"><mark>POST order/confirm</mark></a> и <a href="#link"><mark>POST order/reject</mark></a>.

		<p>По результатам подтверждения заказа, клиент получит СМС-уведомление о подтверждении заказа продавцом.</p></li>
</ol>

<figure><img src="img-1.1.jpg"/></figure>

<a name="step3_api"></a>
<h4>Примеры вызовов API</h4>

<h4>Goods передает продавцу заказ с двумя товарами</h4>

<script src="https://gist.github.com/zavarovkv/8562fbb4883462f464f9c2e6c0d9f7e1.js"></script>
<h4>Продавец полностью подтверждает заказ</h4>

<script src="https://gist.github.com/zavarovkv/d140efca93653877f837a656ec51e365.js"></script>
<h4>Продавец частично подтверждает заказ</h4>

<script src="https://gist.github.com/zavarovkv/17f795d0d4ab79c0004fe69b50ad606a.js"></script>
<script src="https://gist.github.com/zavarovkv/80a21b556c3f0ebe6f39f585534b7377.js"></script>
<h4>Продавец подтверждает заказ в другую дату отгрузки</h4>

<hr />

<a name="how_to_use_api_step3"></a>
<h3>Шаг 3 — Комплектация заказа для отгрузки</h3>

<ol>
	<li><strong>Продавец комплектует заказ для отгрузки </strong>

		<p>Заказ может занимать одно или несколько грузовых мест, для каждого грузового места распечатывается маркировочный лист с уникальным <code>штрих-кодом</code> (<a href="#barcode">подробнее про маркировочный лист и штрих-код</a>).</p>

		<p>Продавец сообщает <strong>goods</strong> об успешной комплектации заказа для того, чтобы <strong>goods</strong> смог передать информацию о заказе на Сортировочный Центр. После завершения комплектации заказ ожидает отгрузки на складе продавца.</p>

		<figure><img src="img-3.jpg"/></figure></li>
</ol>

<hr />

<a name="how_to_use_api_step4"></a>
<h3>Отгрузка заказа</h3>

<ol>
	<li><strong>Продавец отгружает заказ</strong>

		<p>В согласованное время на склад продавца приезжает водитель-курьер логистического оператора для забора груза. Продавец распечатывает <code>Реестр отгрузки</code> с перечнем грузовых мест и передает реестр отгрузки и скомплектованный товар курьеру логистического оператора.</p>

		<figure><img src="img-4.jpg"/></figure></li>
	<li><strong>Покупатель получает заказ</strong>

		<p>На Сортировочном Центре выполняется объединение заказов от разных продавцов в единый заказ для покупателя. В согласованное с покупателем время заказ доставляется покупателю.</p>

		<figure><img src="img-5.jpg"/></figure></li>
</ol>

<hr />

<a name="label_info"></a>
<h2>Требования к маркировочному листу</h2>

<p>Маркировочный лист наклеивается на грузовое место в момент комплектации заказа. Изображение маркировочного листа и описание см. ниже.</p>

<figure><img src="img-6.png"/></figure>

<ol>
	<li><strong>Штрих-код в формате Code 128</strong> (<a href="https://ru.wikipedia.org/wiki/Code_128">подробнее о формате</a>)

		<p>Представляет собой закодированный идентификатор грузового места. Используется для распознавания грузового места на Сортировочном Центре goods.</p></li>
	<li><strong>Идентификатор грузового места</strong>

		<p>Уникальный идентификатор, однозначно идентифицирующий грузовое место продавца. Формируется по шаблону:</p>

		<pre><code>{Идентификатор продавца}*{Номер заказа продавца}*{Номер грузового места}
		</code></pre>

		<p>Например, </p>

		<pre><code>7*73606159*1
		</code></pre>

		<p>где,</p>

		<p><code>7</code> — идентификатор продавца,</p>

		<p><code>73606159</code> — номер заказа продавца,</p>

		<p><code>1</code> — идентификатор грузового места.</p></li>
	<li><strong>Юр. наименование продавца</strong>

		<p>Полное юридическое наименование продавца.</p></li>
	<li><strong>Идентификатор продавца</strong>

		<p>Уникальный идентификатор продавца, выдается goods в момент регистрации личного кабинета.</p></li>
	<li><strong>Адрес доставки</strong>

		<p>Адрес доставки</p></li>
	<li><strong>ФИО получателя</strong>

		<p>ФИО получателя</p></li>
	<li> <strong>Номер доставки</strong>

		<p>Номер доставки goods</p></li>
	<li><strong>Номер отправления</strong>

		<p>Номер заказа продавца</p></li>
	<li><strong>Дата доставки</strong>

		<p>Дата доставки заказа покупателю</p></li>
	<li><strong>Логотип goods</strong>

		<p>Логотип goods</p></li>
</ol>

<hr />

<a name="registry_info"></a>
<h2>Требования к реестру отгрузки</h2>

<hr />

<a name="faq"></a>
<h2>Вопросы и ответы</h2>

<ul>
	<li><strong>Будет ли вызван метод <em>order/cancel</em> при отмене покупателем всего заказа?</strong>

		<p>Да. Метод <em>order/cancel</em>&nbsp;будет вызван по каждой позиции в заказе.</p></li>
	<li><strong>Нужно ли вызывать метод <em>order/reject</em>, если закончились доступные остатки по каким-то позициям в заказе?</strong>

		<p>Да, метод <em>order/reject</em> необходимо вызывать во всех случаях, когда продавец хочет сообщить Goods, что не можете выполнить заказ. Например, если закончились доступные остатки.</p>

		<h2><a href="https://goo.gl/forms/aPaGzQ8Zb9G37wSM2">Я не нашел ответ на свой вопрос</a></h2></li>
</ul>

<hr />

<p>Редакция от 26.02.2018 12:12</p>

</body>
</html>

