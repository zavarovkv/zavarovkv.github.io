<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>Документация по партнерскому API gds</title>
	</head>
<body>
<h1>Документация по партнерскому API g<img src="img-7.png"/><img src="img-8.png"/>ds</h1>

<h1></h1>

<p><code>Партнерский API</code> предназначен для автоматизированного обмена данными между продавцами и goods. API служит для управления заказами, оформленными покупателями на маркетплейсе goods.</p>

<p>Документ предназначен для разработчиков приложений. В документе приведены примеры запросов и ответов с демонстрационными данными.</p>

<ol>
	<li><a href="#how_to_connect">Как подключиться по API</a></li>
	<li><a href="#api">Описание API</a></li>
	<li><a href="#how_to">Процесс обработки заказов продавцом по API</a>

		<ul>
			<li><a href="#step1">Шаг 1 — Размещение товарных предложений на goods</a></li>
			<li><a href="#step2">Шаг 2 — Подтверждение нового заказа</a></li>
			<li><a href="#step3">Шаг 3 — Комплектация заказа для отгрузки</a></li>
			<li><a href="#step4">Шаг 4 — Отгрузка заказа</a></li>
		</ul></li>
	<li><a href="#yml">Загрузка прайс-листа в формате YML</a></li>
	<li><a href="#label_info">Требования к маркировочному листу</a></li>
	<li><a href="#registry_info">Требования к реестру отгрузки</a></li>
	<li><a href="#faq">Вопросы и ответы</a></li>
</ol>

<hr />

<a name="how_to_connect"></a>
<h2>Как подключиться по API</h2>

<p>Для использования API продавец должен выполнить шаги:</p>

<p><code>Шаг 1</code> — <a href="https://goods.ru/inviteshop/">Зарегистрируйтесь в goods</a> и получите доступ к <a href="partner.goods.ru">личному кабинету продавца</a></p>

<p><code>Шаг 2</code> — Настройте интеграцию по API в <a href="https://partner.goods.ru/merchant-app/account/api-integration">личном кабинете</a></p>

<p><code>Шаг 3</code> — Получите авторизационный токен в <a href="https://partner.goods.ru/merchant-app/account/api-integration">личном кабинете</a></p>

<p><code>Шаг 4</code> — Получите уникальный идентификатор магазина (у менеджеров goods)</p>

<p><code>Шаг 5</code> — Используйте токен и идентификатор при вызове методов API</p>

<hr />

<a name="api"></a>
<h2>Описание API</h2>

<p>Подробная спецификация доступна по <a href="/api.html">ссылке</a></p>

<a name="methods"></a>
<h3>Справочник методов</h3>

<h4>Запросы к goods</h4>

<ul>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1confirm%2Fpost"><mark><strong>POST</strong> /order/confirm</mark></a> — подтверждение заказа</li>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1packing%2Fpost"><mark><strong>POST</strong> /order/packing</mark></a> — комплектация заказа</li>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1shipping%2Fpost"><mark><strong>POST</strong> /order/shipping</mark></a> — отгрузка заказа</li>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1reject%2Fpost"><mark><strong>POST</strong> /order/reject</mark></a> — отмена заказа <strong>продавцом</strong></li>
	<li><a href="#"><mark><strong>POST</strong> /order/search</mark></a> — получение списка заказов, удовлетворяющих заданному фильтру</li>
	<li><a href="#"><mark><strong>POST</strong> /order/get</mark></a> — получение детальной информации по заказу</li>
</ul>

<h4>Запросы к продавцу</h4>

<ul>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1new%2Fpost"><mark><strong>POST</strong> /order/new</mark></a> — создание заказа</li>
	<li><a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1cancel%2Fpost"><mark><strong>POST</strong> /order/cancel</mark></a> — отмена заказа <strong>покупателем</strong></li>
	<li><a href="#"><mark><strong>POST</strong> /order/labelUpdate</mark></a> — изменение маркировочного листа</li>
</ul>

<hr />

<a name="how_to"></a>
<h2>Процесс обработки заказов продавцом по API</h2>

<p>Продавец публикует товарные предложения на goods через прайс-лист в формате YML. Покупатель заинтересовавшись выгодным предложением оформляет заказ. После получения заказа продавец подтверждает возможность его отгрузки в указанные сроки, выполняет комплектацию и отгрузку.</p>

<p>Рассмотрим этот процесс более детально.</p>

<a name="step1"></a>
<h3>Шаг 1 — Размещение товарных предложений на goods</h3>

<p>Для размещения товарных предложений для продажи на маркетплейсе goods необходимо сформировать прайс-лист в формате YML (<a href="#yml">подробнее о прайс-листе</a>).</p>

<p>Товарные предложения описываются характеристиками:</p>

<ul>
	<li>наименование / описание товара;

		<ul>
			<li>цена;</li>
			<li>наличие / доступные к продаже остатки (кол-во);</li>
			<li>склад на котором находится товар.</li>
			<li>возможные сроки отгрузки</li>
		</ul>

		<h4>Пример описания товарных предложений в прайс-листе</h4>

		<script src="https://gist.github.com/zavarovkv/7eb65b1b4014e7de8e0f4fa9d785811d.js"></script></li>
</ul>

<hr />

<a name="step2"></a>
<h3>Шаг 2 — Подтверждение нового заказа</h3>

<ol>
	<li><a href="#step2_example">Процесс подтверждения нового заказа</a></li>
	<li><a href="#step2_api">Последовательность обращений по API</a></li>
	<li><a href="#1">Примеры вызовов API</a></li>
</ol>

<h4></h4>

<a name="step2_process"></a>
<h4>2.1 Процесс подтверждения нового заказа</h4>

<p>Рассмотрим пример, когда покупатель оформляет заказ состоящий из трех позиций: <em>телефон</em>, <em>планшет</em>, <em>корм для питомца</em>. <em>Телефон</em> и <em>планшет</em> покупается у <em>’Продавец 1’</em>, а <em>корм для питомца</em> у <em>’Продавец 2’</em>. Goods сообщает каждому продавцу про его часть заказа.</p>

<figure><img src="img-1.jpg"/></figure>

<p>Продавец, получив новый заказ от goods проверяет доступное кол-во остатков по каждой позиции в заказе и дает свое согласие об отгрузке заказа в указанный срок.</p>

<figure><img src="img-2.jpg"/></figure>

<a name="step2_api"></a>
<h4>2.2 Последовательность обращений по API</h4>

<ol>
	<li>После оформления покупателем нового заказа, goods передает информацию по заказу продавцу вызовом метода <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1new%2Fpost"><mark>POST order/new</mark></a>, который должен быть реализован на стороне продавца. 

		<ul>
			<li>В объекте <code>items</code> передается информация по каждому товару в заказе. Элемент <code>itemIndex</code> идентифицирует товар и дальнейшее общение с goods по товарам выполняется через <code>itemIndex</code>.</li>
			<li>В объекте <code>label</code> передается информация необходимая для добавления в шаблон маркировочного листа (<a href="#label_info">подробнее о маркировочном листе</a>).</li>
			<li>В элементе <code>shippingDate</code> передается дата и время отгрузки заказа, до оторой продавец обязуется отгрузить заказ. Для того, чтобы доставить заказ покупателю в запланированную дату доставки.</li>
		</ul></li>
	<li>Продавец обязуется в течение <strong>3 часов</strong> с момента получения заказа сообщить свое решение goods об отгрузки. Решение о подтверждении ожидается по каждому товару в заказе. Сообщается вызовом методов <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1confirm%2Fpost"><mark>POST order/confirm</mark></a> и <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1reject%2Fpost"><mark>POST order/reject</mark></a>.

		<p>По результатам подтверждения заказа, клиент получит СМС-уведомление о подтверждении заказа продавцом.</p></li>
</ol>

<figure><img src="img-3.jpg"/></figure>

<a name="step2_examples"></a>
<h4>2.3 Примеры вызовов API</h4>

<h4>Goods передает продавцу заказ с двумя товарами</h4>

<script src="https://gist.github.com/zavarovkv/8562fbb4883462f464f9c2e6c0d9f7e1.js"></script>
<h4>Продавец подтверждает заказ</h4>

<script src="https://gist.github.com/zavarovkv/d140efca93653877f837a656ec51e365.js"></script>
<h4>Продавец частично подтверждает заказ</h4>

<script src="https://gist.github.com/zavarovkv/17f795d0d4ab79c0004fe69b50ad606a.js"></script>
<script src="https://gist.github.com/zavarovkv/80a21b556c3f0ebe6f39f585534b7377.js"></script>
<h4>Продавец отклоняет заказ</h4>

<script src="https://gist.github.com/mflw/ad97f6b6da0344552132a5640da10aa7.js"></script>
<hr />

<a name="step3"></a>
<h3>Шаг 3 — Комплектация заказа для отгрузки</h3>

<ol>
	<li><a href="#step2_example">Процесс комплектации заказа</a></li>
	<li><a href="#step2_api">Последовательность обращений по API</a></li>
	<li><a href="#1">Примеры вызовов API</a></li>
</ol>

<h4></h4>

<a name="step3_process"></a>
<h4>3.1 Процесс комплектации заказа</h4>

<p>После подтверждения заказа, продавец собирает его и упаковывает. Сборка заказа может осуществляться в одно или несколько грузовых мест, для каждого грузового места распечатывается маркировочный лист с уникальным <code>штрих-кодом</code> (<a href="#label_info">подробнее о маркировочном листе</a>) и наклеивается на упаковку.</p>

<p>Продавец сообщает goods об успешной комплектации заказа для того, чтобы goods смог передать информацию о заказе на Сортировочный Центр. После завершения комплектации заказ ожидает отгрузки на складе продавца.</p>

<figure><img src="img-4.jpg"/></figure>

<a name="step3_api"></a>
<h4>3.2 Последовательность обращений по API</h4>

<ol>
	<li>Комплектация заказа должна быть выполнена продавцом <strong>до окончания времени на отгрузку заказа</strong> (передается в запросе <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1new%2Fpost"><mark>POST order/new</mark></a> в элементе <code>shippingDate</code>.</li>
	<li>Продавец должен передать в вызове метода <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1packing%2Fpost"><mark>POST order/packing</mark></a> номер заказа goods по скомплектованному заказу. Кроме того, сообщить информацию по грузовым местам, в которые укомплектованы товары. При этом:

		<ul>
			<li>несколько товаров могут быть скомплектованы в одно грузовое место (см. пример);</li>
			<li>несколько товаров могут быть скомплектованы в разные грузовые места (см. пример);</li>
			<li>один товар может занимать несколько грузовых мест (см. пример).</li>
		</ul></li>
	<li>Решение о комплектации ожидается по каждому товару в заказе. Сообщается вызовом методов <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1packing%2Fpost"><mark>POST order/packing</mark></a> и <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1reject%2Fpost"><mark>POST order/reject</mark></a>.</li>
</ol>

<figure><img src="img-5.jpg"/></figure>

<a name="step3_example"></a>
<h4>3.3 Примеры вызовов API</h4>

<h4>Продавец комплектует заказ в одно грузовое место</h4>

<script src="https://gist.github.com/mflw/f4a8f66ddfd98a86e95af78a7fe1c746.js"></script>
<h4>Продавец комплектует заказ в разные грузовые места</h4>

<script src="https://gist.github.com/mflw/d7bce4b6027bceff9de02abe73ac642a.js"></script>
<h4>Продавец комплектует товар в заказе в два грузовых места </h4>

<h4>Продавец частично комплектует заказ</h4>

<script src="https://gist.github.com/zavarovkv/80a21b556c3f0ebe6f39f585534b7377.js"></script>
<script src="https://gist.github.com/zavarovkv/80a21b556c3f0ebe6f39f585534b7377.js"></script>
<h4>Продавец отклоняет заказ</h4>

<script src="https://gist.github.com/mflw/ad97f6b6da0344552132a5640da10aa7.js"></script>
<hr />

<a name="step4"></a>
<h3>Шаг 4 — Отгрузка заказа</h3>

<ol>
	<li><a href="#step2_example">Процесс отгрузки заказа</a></li>
	<li><a href="#step2_api">Последовательность обращений по API</a></li>
	<li><a href="#1">Примеры вызовов API</a></li>
</ol>

<a name="step4_process"></a>
<h4>4.1 Процесс отгрузки заказа</h4>

<p>В согласованное время на склад продавца приезжает водитель-курьер логистического оператора для забора груза. Продавец распечатывает <code>Реестр отгрузки</code>(<a href="#registry_info">подробнее о реестре отгрузки</a>) с перечнем грузовых мест и передает реестр отгрузки и скомплектованный товар курьеру логистического оператора.</p>

<p>На Сортировочном Центре выполняется объединение заказов от разных продавцов в единый заказ для покупателя. В согласованное с покупателем время заказ доставляется покупателю.</p>

<figure><img src="img-6.jpg"/></figure>

<a name="step4_api"></a>
<h4>4.2 Последовательность обращений по API</h4>

<p>После физической отгрузки товара курьеру логистической службы goods, продавец передает об этом информацию через вызов метода <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1shipping%2Fpost"><mark>POST order/shipping</mark></a>.</p>

<ol>
	<li>Отгрузка заказа должна быть выполнена продавцом <strong>до окончания времени на отгрузку заказа</strong> (передается в запросе <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1new%2Fpost"><mark>POST order/new</mark></a> в элементе <code>shippingDate</code>.</li>
	<li>Продавец должен передать в вызове метода <a href="/api.html#tag/Upravlenie-zakazami%2Fpaths%2F~1order~1shipping%2Fpost"><mark>POST order/shipping</mark></a> номера отгруженных грузовых мест.</li>
	<li>Решение об отгрузке ожидается по каждому грузовому месту в заказе.</li>
</ol>

<figure><img src="img-7.jpg"/></figure>

<a name="step4_example"></a>
<h4>4.3 Примеры вызовов API</h4>

<h4>Продавец отгружает заказ</h4>

<script src="https://gist.github.com/mflw/7080cbe5d5624193a0420a061bc99547.js"></script>
<h4>Продавец частично отгружает заказ</h4>

<script src="https://gist.github.com/mflw/1f3f0fe320537098cfb6276214d98b40.js"></script>
<h4>Продавец отклоняет заказ</h4>

<script src="https://gist.github.com/mflw/ad97f6b6da0344552132a5640da10aa7.js"></script>
<hr />

<a name="yml"></a>
<h2>Загрузка прайс-листа в формате YML</h2>

<hr />

<a name="label_info"></a>
<h2>Требования к маркировочному листу</h2>

<blockquote>
<p><a href="/label.html">Скачать шаблон маркировочного листа</a></p>
</blockquote>

<p>Маркировочный лист наклеивается на грузовое место в момент комплектации заказа. Изображение маркировочного листа и описание см. ниже.</p>

<figure><img src="img-9.jpg"/></figure>

<ol>
	<li><strong>Штрих-код в формате Code 128</strong> (<a href="https://ru.wikipedia.org/wiki/Code_128">подробнее о формате</a>)

		<p>Представляет собой закодированный идентификатор грузового места. Используется для распознавания грузового места на Сортировочном Центре goods.</p></li>
	<li><strong>Идентификатор грузового места</strong>

		<p>Уникальный идентификатор, однозначно идентифицирующий грузовое место продавца. </p>

		<p>Формируется по шаблону: <code>{Идентификатор продавца}*{Номер заказа продавца}*{Номер грузового места}</code></p>

		<p>Например, </p>

		<p><code>7*73606159*1</code>, где:</p>

		<p><code>7</code> — идентификатор продавца,</p>

		<p><code>73606159</code> — номер заказа продавца,</p>

		<p><code>1</code> — идентификатор грузового места.</p></li>
	<li><strong>Юр. наименование продавца</strong>

		<p>Полное юридическое наименование продавца.</p></li>
	<li><strong>Идентификатор продавца</strong>

		<p>Уникальный идентификатор продавца, выдается goods в момент регистрации личного кабинета.</p></li>
	<li><strong>Адрес доставки</strong>

		<p>Адрес доставки</p></li>
	<li><strong>ФИО получателя</strong>

		<p>ФИО получателя</p></li>
	<li> <strong>Номер доставки</strong>

		<p>Номер доставки goods</p></li>
	<li><strong>Номер отправления</strong>

		<p>Номер заказа продавца</p></li>
	<li><strong>Дата доставки</strong>

		<p>Дата доставки заказа покупателю</p></li>
	<li><strong>Логотип goods</strong>

		<p>Логотип goods</p></li>
</ol>

<hr />

<a name="registry_info"></a>
<h2>Требования к реестру отгрузки</h2>

<blockquote>
<p><a href="/registry.html">Скачать шаблон реестра отгрузки</a></p>
</blockquote>

<p>Реестр отгрузки передается продавцом курьеру логистической службы вместе с грузовыми местами. Реестр должен содержать перечень всех передаваемых курьеру грузовых мест. Изображение реестра отгрузки и описание см. ниже.</p>

<figure><img src="img-10.jpg"/></figure>

<ol>
	<li><strong>Номер доставки</strong></li>
	<li><strong>Номер отправления goods</strong></li>
	<li><strong>Номер отправления продавца с префиксом</strong></li>
	<li><strong>Количество мест</strong></li>
	<li><strong>Номер места продавца</strong></li>
	<li><strong>Объявленная стоимость места, руб</strong></li>
	<li><strong>Объявленная стоимость отправления, руб</strong></li>
</ol>

<hr />

<a name="faq"></a>
<h2>Вопросы и ответы</h2>

<ul>
	<li><strong>Будет ли вызван метод <em>order/cancel</em> при отмене покупателем всего заказа?</strong>

		<p>Да. Метод <em>order/cancel</em>&nbsp;будет вызван по каждой позиции в заказе.</p></li>
	<li><strong>Нужно ли вызывать метод <em>order/reject</em>, если закончились доступные остатки по каким-то позициям в заказе?</strong>

		<p>Да, метод <em>order/reject</em> необходимо вызывать во всех случаях, когда продавец хочет сообщить Goods, что не можете выполнить заказ. Например, если закончились доступные остатки.</p>

		<h2><a href="#help">Я не нашел ответ на свой вопрос</a></h2></li>
</ul>

<hr />

<p>Редакция от 26.02.2018 12:12</p>

</body>
</html>

